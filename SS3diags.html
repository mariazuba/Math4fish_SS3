<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Diagnóstico de modelos SS3</title>

<script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

.sourceCode .row {
  width: 100%;
}
.sourceCode {
  overflow-x: auto;
}
.code-folding-btn {
  margin-right: -30px;
}
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>







<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Inicio</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="intro.html">Requisitos</a>
</li>
<li>
  <a href="Datos.html">Datos</a>
</li>
<li>
  <a href="R4SS.html">R4SS</a>
</li>
<li>
  <a href="SS3diags.html">SS3diags</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
<div class="upper-right-logo"> </div>

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Diagnóstico de modelos SS3</h1>

</div>


<p><a href="https://github.com/jabbamodel/ss3diags">github ss3diags</a>
y <a
href="https://github.com/jabbamodel/ss3diags/blob/master/Vignette/ss3diags_handbook.pdf">guía</a></p>
<p>Referencia:</p>
<p>Carvalho, F., Winker, H., Courtney, D., Kapur, M., Kell, L.,
Cardinale, M., Schirripag, M., Kitakado, T., Yemane, D., Piner, K.R.,
Maunder, M.N., Taylor, I., Wetzel, C.R., Doering, K., Johnsonm, K.F.,
Methot, R.D., in press. A Cookbook for Using Model Diagnostics in
Integrated Stock Assessments. Fisheries Research.</p>
<style type="text/css">
.scroll-200{
            max-height: 200px; 
            overflow-y: auto; 
            background-color: #f1f1f1;
            }
</style>
<style type="text/css">

/*----------LOGO above TOC---------*/

#TOC::before {
  content: "";
  display: block;
  height: 100px;
  margin: 2em 20px 40px 20px;
  background-image: url("LOGO_2SN_recortado.png");
  background-size: contain;
  background-position: center center;
  background-repeat: no-repeat;
}

</style>
<div id="section"
class="section level2 tabset tabset-fade tabset-pills">
<h2 class="tabset tabset-fade tabset-pills"></h2>
<div id="ajustes-y-residuales" class="section level3">
<h3>Ajustes y residuales</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">SSplotComps</span>(replist, <span class="at">subplots =</span> <span class="fu">c</span>(<span class="dv">21</span>,<span class="dv">24</span>))</span></code></pre></div>
<p><img src="SS3diags_files/figure-html/unnamed-chunk-6-1.png" width="672" style="display: block; margin: auto;" /><img src="SS3diags_files/figure-html/unnamed-chunk-6-2.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">SSplotComps</span>(replist, <span class="at">subplots =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">1</span>))</span></code></pre></div>
<p><img src="SS3diags_files/figure-html/unnamed-chunk-7-1.png" width="672" /><img src="SS3diags_files/figure-html/unnamed-chunk-7-2.png" width="672" /><img src="SS3diags_files/figure-html/unnamed-chunk-7-3.png" width="672" /><img src="SS3diags_files/figure-html/unnamed-chunk-7-4.png" width="672" /><img src="SS3diags_files/figure-html/unnamed-chunk-7-5.png" width="672" /></p>
</div>
<div id="análisis-retrospectivo" class="section level3">
<h3>Análisis retrospectivo</h3>
<p>Un análisis retrospectivo elimina una cierta cantidad de años de los
datos del modelo y vuelve a calcular el ajuste. Por lo general, esto se
hace varias veces y los resultados se utilizan para buscar patrones
retrospectivos (es decir, desviaciones no aleatorias en los parámetros
estimados o cantidades derivadas a medida que se eliminan años de
datos). Si los resultados del modelo cambian de manera drástica y no
aleatoria a medida que se eliminan los datos, el soporte para el modelo
es menor. Para obtener más información sobre la teoría y los detalles
detrás de los análisis retrospectivos, consulte <strong>Hurtado-Ferro et
al. 2015</strong> y <strong>Legault 2020</strong>.</p>
<p>La función retro() se puede utilizar para ejecutar análisis
retrospectivos a partir de un modelo de Stock Synthesis existente. Tenga
en cuenta que es más seguro crear una copia de su modelo original de
Stock Synthesis en el que se ejecuta la retrospectiva, en caso de que
haya problemas con la ejecución. Por ejemplo, se podría hacer una
retrospectiva de cinco años:</p>
<ul>
<li>Paso 1: Identificar el período retrospectivo</li>
<li>Paso 2: Identifique el directorio base</li>
<li>Paso 3: Archivos DAT y CONTROL</li>
<li>Paso 4: Crea un subdirectorio para las Retrospectivas</li>
<li>Paso 5: Modificar el archivo Starter.ss</li>
<li>Paso 6: corre el retrospective</li>
<li>Paso 7: Lea la salida de SS_doRetro()</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(mod_path)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#------------</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># paso 1</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">#------------</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>start.retro <span class="ot">&lt;-</span> <span class="dv">0</span> <span class="co"># end year of reference year</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>end.retro <span class="ot">&lt;-</span> <span class="dv">4</span> <span class="co"># number of years for retrospective e.g.,</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co">#------------</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co"># paso 2</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co">#------------</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>dirname.base <span class="ot">=</span> <span class="fu">getwd</span>()</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>run <span class="ot">=</span> <span class="st">&quot;Reference_Run&quot;</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>model.run <span class="ot">&lt;-</span> <span class="fu">file.path</span>(dirname.base, run)</span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>retro.phk <span class="ot">&lt;-</span> r4ss<span class="sc">::</span><span class="fu">SSgetoutput</span>(<span class="at">dirvec =</span> <span class="fu">file.path</span>(model.run, <span class="fu">paste0</span>(<span class="st">&quot;retro&quot;</span>, start.retro<span class="sc">:-</span>end.retro)))</span></code></pre></div>
<pre><code>## length(dirvec) as input to SSgetoutput: 5 
## reading output from C:/MATH4FISH/Math4fish_SS3/quarter/10a_anchcadiz/Reference_Run/retro0/Report.sso 
## added element &#39;replist1&#39; to list
## reading output from C:/MATH4FISH/Math4fish_SS3/quarter/10a_anchcadiz/Reference_Run/retro-1/Report.sso 
## added element &#39;replist2&#39; to list
## reading output from C:/MATH4FISH/Math4fish_SS3/quarter/10a_anchcadiz/Reference_Run/retro-2/Report.sso 
## added element &#39;replist3&#39; to list
## reading output from C:/MATH4FISH/Math4fish_SS3/quarter/10a_anchcadiz/Reference_Run/retro-3/Report.sso 
## added element &#39;replist4&#39; to list
## reading output from C:/MATH4FISH/Math4fish_SS3/quarter/10a_anchcadiz/Reference_Run/retro-4/Report.sso 
## added element &#39;replist5&#39; to list</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># It is often useful to save the retro model runs as .rdata file for further processing with ss3diags, considering that reading the models with r4ss::SSgetoutput() can be quite time-consuming for more complex models.</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(retro.phk, <span class="at">file =</span> <span class="fu">file.path</span>(model.run, <span class="st">&quot;retro.phk.rdata&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>check.retro <span class="ot">=</span> r4ss<span class="sc">::</span><span class="fu">SSsummarize</span>(retro.phk)</span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sspar</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="at">plot.cex =</span> <span class="fl">0.8</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">SSplotRetro</span>(check.retro, <span class="at">add =</span> T, <span class="at">forecast =</span> T, <span class="at">legend =</span> F, <span class="at">verbose =</span> F, <span class="at">xmin =</span> <span class="dv">2000</span>)</span></code></pre></div>
<pre><code>##   type     peel           Rho ForecastRho
## 1  SSB     2020  0.3244892270   1.0452230
## 2  SSB     2019 -0.0009997573   0.5352011
## 3  SSB     2018  0.0285438816  -0.2089978
## 4  SSB     2017 -0.5841734340  -0.5442693
## 5  SSB Combined -0.0580350207   0.2067893</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">SSplotRetro</span>(check.retro, <span class="at">add =</span> T, <span class="at">subplots =</span> <span class="st">&quot;F&quot;</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">3.5</span>), <span class="at">forecast =</span> T,</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="at">legendloc =</span> <span class="st">&quot;topleft&quot;</span>, <span class="at">legendcex =</span> <span class="fl">0.8</span>, <span class="at">verbose =</span> F, <span class="at">xmin =</span> <span class="dv">2000</span>)</span></code></pre></div>
<p><img src="SS3diags_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<pre><code>##   type     peel          Rho   ForecastRho
## 1    F     2020 -0.120514087 -0.3353472742
## 2    F     2019  0.041828380 -0.1638073101
## 3    F     2018 -0.053434719  0.1661926102
## 4    F     2017  0.139173396  0.3331037349
## 5    F Combined  0.001763242  0.0000354402</code></pre>
</div>
<div id="análisis-de-residuos" class="section level3">
<h3>Análisis de residuos</h3>
<p>Estas Figuras corresponden a un test de ajustes de los índices y
composiciones de tallas. El sombreado verde indica que no hay evidencia
(p = 0,05) y el sombreado rojo evidencia (p &lt; 0,05) para rechazar la
hipótesis de una serie temporal de residuos distribuida aleatoriamente,
respectivamente.</p>
<p>El área sombreada (verde/roja) abarca tres desviaciones estándar
residuales a ambos lados de cero, y los puntos rojos fuera del sombreado
violan el “límite de tres sigma” para esa serie.</p>
<p>Ejecuta el gráfico de prueba y el gráfico de residuos conjuntos para
ajustes a los índices de CPUE, donde las líneas verticales con puntos
muestran los residuos y las líneas negras sólidas muestran loess más
suave en todos los residuos. Los diagramas de caja indican la mediana y
cuantiles en los casos en que los residuos de los índices múltiples
estén disponibles para un año determinado.</p>
<p>Los errores cuadráticos medios (RMSE) se incluyen en la esquina
superior derecha de cada gráfico.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>r4ss<span class="sc">::</span><span class="fu">sspar</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">SSplotRunstest</span>(replist, <span class="at">subplots =</span> <span class="st">&quot;cpue&quot;</span>, <span class="at">add =</span> <span class="cn">TRUE</span>,<span class="at">legendcex =</span> <span class="fl">0.8</span>, <span class="at">verbose =</span> F)</span></code></pre></div>
<pre><code>##      Index runs.p   test  sigma3.lo sigma3.hi type
## 1   PELAGO  0.767 Passed -0.6250597 0.6250597 cpue
## 2 ECOCADIZ  0.556 Passed -1.3652589 1.3652589 cpue</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">SSplotJABBAres</span>(replist, <span class="at">subplots =</span> <span class="st">&quot;cpue&quot;</span>, <span class="at">add =</span> <span class="cn">TRUE</span>,<span class="at">legendcex =</span> <span class="fl">0.8</span>, <span class="at">seas=</span><span class="st">&quot;comb&quot;</span>, <span class="at">verbose =</span> F)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##   Fleet    RMSE.perc  Nobs
##   &lt;chr&gt;        &lt;dbl&gt; &lt;int&gt;
## 1 ECOCADIZ      48.7    13
## 2 PELAGO        37.8    16
## 3 Combined      43.1    29</code></pre>
<p><img src="SS3diags_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>r4ss<span class="sc">::</span><span class="fu">sspar</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>),<span class="at">plot.cex=</span><span class="fl">0.8</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">SSplotRunstest</span>(replist, <span class="at">subplots =</span> <span class="st">&quot;len&quot;</span>, <span class="at">add =</span> <span class="cn">TRUE</span>, <span class="at">verbose =</span> F,<span class="at">legendcex =</span> <span class="fl">0.8</span>)</span></code></pre></div>
<pre><code>## Warning: combining data from multiple seasons</code></pre>
<pre><code>##      Index runs.p   test  sigma3.lo sigma3.hi type
## 1  Fishery  0.000 Failed -0.2146313 0.2146313  len
## 2   PELAGO  0.455 Passed -0.2303625 0.2303625  len
## 3 ECOCADIZ  0.691 Passed -0.1391272 0.1391272  len</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">SSplotJABBAres</span>(replist, <span class="at">subplots =</span> <span class="st">&quot;len&quot;</span>, <span class="at">add =</span> <span class="cn">TRUE</span>, <span class="at">seas=</span><span class="st">&quot;comb&quot;</span>, <span class="at">verbose =</span> F,<span class="at">legendcex =</span> <span class="fl">0.8</span>)</span></code></pre></div>
<pre><code>## Warning: combining data from multiple seasons</code></pre>
<p><img src="SS3diags_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<pre><code>## # A tibble: 4 × 3
##   Fleet    RMSE.perc  Nobs
##   &lt;chr&gt;        &lt;dbl&gt; &lt;int&gt;
## 1 ECOCADIZ       7.5    10
## 2 Fishery       11.7    58
## 3 PELAGO         8.4    15
## 4 Combined      10.8    83</code></pre>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>

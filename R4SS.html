<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>R4SS.knit</title>

<script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

.sourceCode .row {
  width: 100%;
}
.sourceCode {
  overflow-x: auto;
}
.code-folding-btn {
  margin-right: -30px;
}
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>







<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Inicio</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="intro.html">Requisitos</a>
</li>
<li>
  <a href="Datos.html">Archivos SS3</a>
</li>
<li>
  <a href="R4SS.html">Ejecutar SS3</a>
</li>
<li>
  <a href="Visualizacion.html">Visualización</a>
</li>
<li>
  <a href="retro.html">Retrospectivo</a>
</li>
<li>
  <a href="residuos.html">Residuos</a>
</li>
<li>
  <a href="SS3diags.html">Debugging</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
<div class="upper-right-logo"> </div>

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>




</div>


<div id="cómo-ejecutar-modelos-ss3" class="section level1">
<h1>Cómo ejecutar modelos SS3</h1>
<p>   </p>
<p>Para comenzar descargue los archivos del modelo simple (<a
href="https://mariazuba.github.io/Math4fish_SS3/model_files/simple/starter.ss"><strong>starter.ss</strong></a>,
<a
href="https://mariazuba.github.io/Math4fish_SS3/model_files/simple/data.ss"><strong>data.ss</strong></a>,
<a
href="https://mariazuba.github.io/Math4fish_SS3/model_files/simple/forecast.ss"><strong>forecast.ss</strong></a>,
<a
href="https://mariazuba.github.io/Math4fish_SS3/model_files/simple/control.ss"><strong>control.ss</strong></a>)
y el ejecutable SS3 (<a
href="https://github.com/mariazuba/Math4fish_SS3/blob/master/model_files/simple/ss_win.exe"><strong>ss.exe</strong></a>,
hacer clic en Download), y luego guardelos en su directorio de trabajo,
como se muestra a continuación.</p>
<p>   </p>
<p><img src="figuras/files_data.png" width="80%" style="display: block; margin: auto;" /></p>
<p>   </p>
<p>Para ejecutar el modelo simple utilizaremos la función
<code>run_SS_models</code> de la libreria r4ss . Debemos especificar el
directorio de trabajo que contiene los archivos del modelo (dirvec =
mod_path) y el nombre del ejecutable (model=exe_path) como se muestra a
continuación.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(r4ss)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>mod_path <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">getwd</span>(),<span class="st">&#39;/model_files/simple&#39;</span>,<span class="at">sep=</span><span class="st">&quot;&quot;</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>exe_path <span class="ot">&lt;-</span> <span class="fu">paste</span>(mod_path,<span class="st">&quot;ss_win.exe&quot;</span>,<span class="at">sep=</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>r4ss<span class="sc">::</span><span class="fu">run_SS_models</span>(<span class="at">dirvec=</span>mod_path, <span class="at">model=</span>exe_path,<span class="at">skipfinished=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<p>Al iniciar la ejecución, SS3 siempre lee los archivos
<strong>starter.ss, data.ss</strong> y <strong>forecast.ss,
control.ss</strong> en el mismo orden, escribiendo las salidas de
debugging en <strong>echoinput.sso</strong> y advertencias en
<strong>warnings.sso</strong> a medida que se lee.</p>
<p>Si la salida no se ejecuta o NO SUPERA el mensaje
<strong>Estimating…please wait…</strong>, entonces siga los siguientes
pasos:</p>
<ul>
<li>Asegurese de que todos los archivos y directorios tengan el nombre
correcto.</li>
<li>Verifique que el archivo <strong>starter.ss</strong> tenga los
nombres correctos de los archivos de <strong>control.ss</strong> y
<strong>data.ss</strong>.</li>
<li>Si SS3 comienza a leer archivos y luego falla, revise los archivos
<strong>warnings.sso</strong> y <strong>echoinput.sso</strong>. Mirar el
último contenido escrito en <strong>echoinput.sso</strong> y compararlo
con sus archivos de entrada puede proporcionar pistas sobre dónde (y
posiblemente por qué) falló la ejecución.</li>
</ul>
<p>Si la salida SI SUPERA el mensaje <strong>Estimating…please
wait…</strong> entonces la estructura de los datos de entrada de SS3 es
correcta y por lo tanto, debería ver un resultado en la línea de comando
similar a la que se muestra a continuación.</p>
<p>   </p>
<p><img src="figuras/run_simple_initial.png" width="60%" style="display: block; margin: auto;" /></p>
<p>   </p>
<p>Luego, SS3 va a la sección de procedimiento donde ADMB realiza
cambios iterativos de parámetros (iteration) para minimizar la función
de verosimilitud (-log(L)), como se muestra a continuación.</p>
<p>   </p>
<p><img src="figuras/run_simple_iteration.png" width="100%" style="display: block; margin: auto;" /></p>
<p>   </p>
<p>Cuando ADMB logra la convergencia, el control pasa a sdphase para el
cálculo de la varianza de los parámetros (a menos que se especifique la
opción <code>-nohess</code>). Después de sdphase, SS3 pasa a la sección
de código de benchmark y forecast y luego al reporte final. Cuando se
completa la ejecución de SS3, aparece <strong>!! Run has completed
!!</strong>.</p>
<p>Se recomienda revisar el archivo <strong>warnings.sso</strong> en
busca de problemas y sugerencias, independientemente si la ejecución se
completó correctamente o no, ya que incluye sugerencias para mejorar la
especificación del modelo y advertencias sobre errores comunes de
especificación del modelo.</p>
<p>Si SS3 no fue ejecutado correctamente, no verá el mensaje <strong>!!
Run has completed !!</strong>.</p>
<p>   </p>
<p><img src="figuras/run_simple.png" width="60%" style="display: block; margin: auto;" /></p>
<p>   </p>
<p>Los archivos de salida que contienen resultados normalmente se
escriben en el directorio de trabajo donde fue ejecutado el modelo SS3,
como se muestra a continuación.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>mod_path <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">getwd</span>(),<span class="st">&#39;/model_files/simple&#39;</span>,<span class="at">sep=</span><span class="st">&quot;&quot;</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dir</span>(mod_path)</span></code></pre></div>
<pre><code>##  [1] &quot;admodel.cov&quot;            &quot;admodel.dep&quot;            &quot;admodel.hes&quot;           
##  [4] &quot;CompReport.sso&quot;         &quot;control.ss&quot;             &quot;control.ss_new&quot;        
##  [7] &quot;covar.sso&quot;              &quot;CumReport.sso&quot;          &quot;data.ss&quot;               
## [10] &quot;data_echo.ss_new&quot;       &quot;derived_posteriors.sso&quot; &quot;echoinput.sso&quot;         
## [13] &quot;fmin.log&quot;               &quot;Forecast-report.sso&quot;    &quot;forecast.ss&quot;           
## [16] &quot;forecast.ss_new&quot;        &quot;ParmTrace.sso&quot;          &quot;plots&quot;                 
## [19] &quot;posterior_obj_func.sso&quot; &quot;posterior_vectors.sso&quot;  &quot;posteriors.sso&quot;        
## [22] &quot;rebuild.sso&quot;            &quot;Reference_Run&quot;          &quot;Report.sso&quot;            
## [25] &quot;runnumber.ss&quot;           &quot;SIS_table.sso&quot;          &quot;ss.b01&quot;                
## [28] &quot;ss.b02&quot;                 &quot;ss.b03&quot;                 &quot;ss.b04&quot;                
## [31] &quot;ss.bar&quot;                 &quot;ss.cor&quot;                 &quot;ss.eva&quot;                
## [34] &quot;ss.p01&quot;                 &quot;ss.p02&quot;                 &quot;ss.p03&quot;                
## [37] &quot;ss.p04&quot;                 &quot;ss.par&quot;                 &quot;ss.r01&quot;                
## [40] &quot;ss.r02&quot;                 &quot;ss.r03&quot;                 &quot;ss.r04&quot;                
## [43] &quot;ss.rep&quot;                 &quot;ss.std&quot;                 &quot;ss_summary.sso&quot;        
## [46] &quot;ss_win.exe&quot;             &quot;ss_win.log&quot;             &quot;starter.ss&quot;            
## [49] &quot;starter.ss_new&quot;         &quot;warning.sso&quot;            &quot;wtatage.ss_new&quot;</code></pre>
<p>   </p>
<p>Muchos archivos de texto de salida se crean durante la ejecución del
modelo. Los archivos de salida más útiles se pueden dividir en :</p>
<ul>
<li><strong>Archivos que contienen resultados</strong>. Estos archivos
incluyen <strong>ss_summary.sso</strong> y <strong>Report.sso</strong>
que contienen los resultados del modelo resumidos de diferentes
maneras.</li>
<li><strong>.ss_new files</strong>. Estos archivos repiten los archivos
de entrada SS3, pero incluyen comentarios estandarizados. Los valores
deben ser los mismos que los archivos de entrada, excepto
<strong>control.ss_new</strong>, que actualiza los valores iniciales a
los valores estimados finales. Los archivos <strong>.ss_new</strong>
pueden ser útiles para estandarizar los comentarios en los archivos de
entrada y se pueden verificar para asegurarse de que SS3 interpretó las
entradas como pretendía el usuario.</li>
<li><strong>Archivos utilizados para debugging</strong>. Estos archivos
incluyen <strong>warnings.sso</strong> y
<strong>echoinput.sso</strong>.</li>
</ul>
<p>   </p>
</div>
<div id="cómo-crear-nuevos-modelos-ss3" class="section level1">
<h1>Cómo crear nuevos modelos SS3</h1>
<p>Hay muchos flujos de trabajo potenciales para desarrollar un nuevo
modelo SS3, pero una técnica común es comenzar con un modelo existente y
cambiarlo por partes. La técnica básica es:</p>
<ol style="list-style-type: decimal">
<li><p>Encuentre un modelo de trabajo existente (quizás uno de los
modelos de ejemplo SS3 disponibles en el repositorio de ejemplos de
usuario o quizás un modelo más similar en forma al modelo que planea
crear).</p></li>
<li><p>Editar partes del modelo e intentar ejecutar a medida que avanza
para verificar que SS3 pueda leer correctamente sus entradas y que
tengan sentido lógico (consejo: use options
<code>-stopph 0 -nohess</code> para reducir el tiempo de ejecución con
cada iteración de verificación de entradas al no estimar nada y no
invertir la hessiana).</p></li>
</ol>
<p>A continuación mostramos el flujo de trabajo para modificar archivos
de entrada y ejecutar modelos utilizando la <a
href="https://r4ss.github.io/r4ss/vignettes/r4ss-intro-vignette.html">Guía
de library r4ss</a> .</p>
<p>Demostraremos esto creando un nuevo directorio para nuestro nuevo
modelo (<code>new_mod_path</code>) y luego copiaremos los archivos del
directorio que contiene el modelo inicial (<code>mod_path</code>) en el
nuevo directorio, como se indica a continuación.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># initial model to modify</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>mod_path <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">getwd</span>(),<span class="st">&#39;/model_files/simple&#39;</span>,<span class="at">sep=</span><span class="st">&quot;&quot;</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create a new directory to put a new, modified version of the model</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>new_mod_path <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">getwd</span>(),<span class="st">&#39;/model_files/simple_new&#39;</span>,<span class="at">sep=</span><span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p>Se utiliza la funcion <code>copy_SS_inputs</code> de la librería r4ss
para copiar los archivos del directorio de trabajo del modelo inicial
(<code>dir.old=mod_path</code>) al directorio de trabajo del nuevo
modelo (<code>dir.new=new_mod_path</code>).</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(r4ss)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">copy_SS_inputs</span>(<span class="at">dir.old =</span> mod_path, <span class="at">dir.new =</span> new_mod_path)</span></code></pre></div>
<p>Luego podemos leer los archivos copiados en nuestro nuevo directorio
como objetos de lista en R usando las funciones
<code>SS_read*()</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>start <span class="ot">&lt;-</span> r4ss<span class="sc">::</span><span class="fu">SS_readstarter</span>(<span class="at">file =</span> <span class="fu">file.path</span>(new_mod_path, <span class="st">&quot;starter.ss&quot;</span>), <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># note the data and control file names can vary, so are determined from the </span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># starter file.</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> r4ss<span class="sc">::</span><span class="fu">SS_readdat</span>(<span class="at">file =</span> <span class="fu">file.path</span>(new_mod_path, start<span class="sc">$</span>datfile),<span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in ctl file. Note that the data fileR object is needed so that SS_readctl</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co"># assumes the correct data structure</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>ctl <span class="ot">&lt;-</span> r4ss<span class="sc">::</span><span class="fu">SS_readctl</span>(<span class="at">file =</span> <span class="fu">file.path</span>(new_mod_path, start<span class="sc">$</span>ctlfil),<span class="at">verbose =</span> <span class="cn">FALSE</span>,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>                        <span class="at">use_datlist =</span> <span class="cn">TRUE</span>, <span class="at">datlist =</span> dat)</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>fore <span class="ot">&lt;-</span> r4ss<span class="sc">::</span><span class="fu">SS_readforecast</span>(<span class="at">file =</span> <span class="fu">file.path</span>(new_mod_path, <span class="st">&quot;forecast.ss&quot;</span>),<span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="co"># can also read in wtatage.ss for an empirical wt at age model using</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="co"># r4ss::SS_readwtatage()</span></span></code></pre></div>
<p>A continuación investigamos el modelo, cada uno de los archivos de
entrada se lee en R como una lista. Los componentes de la lista deben
estar en el mismo orden en que aparecen en el archivo de texto. Use
<code>names()</code> para ver todos los componentes de la lista:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(start) <span class="co"># see names of the list components of starter</span></span></code></pre></div>
<pre class="scroll-200"><code>##  [1] &quot;sourcefile&quot;             &quot;type&quot;                   &quot;SSversion&quot;             
##  [4] &quot;datfile&quot;                &quot;ctlfile&quot;                &quot;init_values_src&quot;       
##  [7] &quot;run_display_detail&quot;     &quot;detailed_age_structure&quot; &quot;checkup&quot;               
## [10] &quot;parmtrace&quot;              &quot;cumreport&quot;              &quot;prior_like&quot;            
## [13] &quot;soft_bounds&quot;            &quot;N_bootstraps&quot;           &quot;last_estimation_phase&quot; 
## [16] &quot;MCMCburn&quot;               &quot;MCMCthin&quot;               &quot;jitter_fraction&quot;       
## [19] &quot;minyr_sdreport&quot;         &quot;maxyr_sdreport&quot;         &quot;N_STD_yrs&quot;             
## [22] &quot;converge_criterion&quot;     &quot;retro_yr&quot;               &quot;min_age_summary_bio&quot;   
## [25] &quot;depl_basis&quot;             &quot;depl_denom_frac&quot;        &quot;SPR_basis&quot;             
## [28] &quot;F_report_units&quot;         &quot;F_age_range&quot;            &quot;F_report_basis&quot;        
## [31] &quot;MCMC_output_detail&quot;     &quot;ALK_tolerance&quot;          &quot;final&quot;                 
## [34] &quot;seed&quot;</code></pre>
<p>También se puede hacer referencia a un elemento específico para ver
los componentes. Por ejemplo, podemos mirar la sección de parámetros de
mortalidad y crecimiento (MG_parms):</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>ctl<span class="sc">$</span>MG_parms</span></code></pre></div>
<pre class="scroll-200"><code>##                               LO        HI        INIT       PRIOR PR_SD
## NatM_p_1_Fem_GP_1          5e-02  0.150000  0.20000000  0.10000000   0.8
## L_at_Amin_Fem_GP_1        -1e+01 45.000000 21.65350000 36.00000000  10.0
## L_at_Amax_Fem_GP_1         4e+01 90.000000 71.64930000 70.00000000  10.0
## VonBert_K_Fem_GP_1         5e-02  0.250000  0.14729700  0.15000000   0.8
## CV_young_Fem_GP_1          5e-02  0.250000  0.10000000  0.10000000   0.8
## CV_old_Fem_GP_1            5e-02  0.250000  0.10000000  0.10000000   0.8
## Wtlen_1_Fem_GP_1          -3e+00  3.000000  0.00000244  0.00000244   0.8
## Wtlen_2_Fem_GP_1          -3e+00  4.000000  3.34694000  3.34694000   0.8
## Mat50%_Fem_GP_1            5e+01 60.000000 55.00000000 55.00000000   0.8
## Mat_slope_Fem_GP_1        -3e+00  3.000000 -0.25000000 -0.25000000   0.8
## Eggs/kg_inter_Fem_GP_1    -3e+00  3.000000  1.00000000  1.00000000   0.8
## Eggs/kg_slope_wt_Fem_GP_1 -3e+00  3.000000  0.00000000  0.00000000   0.8
## NatM_p_1_Mal_GP_1          5e-02  0.150000  0.10000000  0.10000000   0.8
## L_at_Amin_Mal_GP_1         0e+00 45.000000  0.00000000 36.00000000  10.0
## L_at_Amax_Mal_GP_1         4e+01 90.000000 69.53620000 70.00000000  10.0
## VonBert_K_Mal_GP_1         5e-02  0.250000  0.16353300  0.15000000   0.8
## CV_young_Mal_GP_1          5e-02  0.250000  0.10000000  0.10000000   0.8
## CV_old_Mal_GP_1            5e-02  0.250000  0.10000000  0.10000000   0.8
## Wtlen_1_Mal_GP_1          -3e+00  3.000000  0.00000244  0.00000244   0.8
## Wtlen_2_Mal_GP_1          -3e+00  4.000000  3.34694000  3.34694000   0.8
## RecrDist_GP_1              0e+00  0.000000  0.00000000  0.00000000   0.0
## RecrDist_Area_1            0e+00  0.000000  0.00000000  0.00000000   0.0
## RecrDist_month_1           0e+00  0.000000  0.00000000  0.00000000   0.0
## CohortGrowDev              1e-01 10.000000  1.00000000  1.00000000   1.0
## FracFemale_GP_1            1e-06  0.999999  0.50000000  0.50000000   0.5
##                           PR_type PHASE env_var&amp;link dev_link dev_minyr
## NatM_p_1_Fem_GP_1               0    -3            0        0         0
## L_at_Amin_Fem_GP_1              6     2            0        0         0
## L_at_Amax_Fem_GP_1              6     4            0        0         0
## VonBert_K_Fem_GP_1              6     4            0        0         0
## CV_young_Fem_GP_1               0    -3            0        0         0
## CV_old_Fem_GP_1                 0    -3            0        0         0
## Wtlen_1_Fem_GP_1                0    -3            0        0         0
## Wtlen_2_Fem_GP_1                0    -3            0        0         0
## Mat50%_Fem_GP_1                 0    -3            0        0         0
## Mat_slope_Fem_GP_1              0    -3            0        0         0
## Eggs/kg_inter_Fem_GP_1          0    -3            0        0         0
## Eggs/kg_slope_wt_Fem_GP_1       0    -3            0        0         0
## NatM_p_1_Mal_GP_1               0    -3            0        0         0
## L_at_Amin_Mal_GP_1              0    -3            0        0         0
## L_at_Amax_Mal_GP_1              6     4            0        0         0
## VonBert_K_Mal_GP_1              6     4            0        0         0
## CV_young_Mal_GP_1               0    -3            0        0         0
## CV_old_Mal_GP_1                 0    -3            0        0         0
## Wtlen_1_Mal_GP_1                0    -3            0        0         0
## Wtlen_2_Mal_GP_1                0    -3            0        0         0
## RecrDist_GP_1                   0    -4            0        0         0
## RecrDist_Area_1                 0    -4            0        0         0
## RecrDist_month_1                0    -4            0        0         0
## CohortGrowDev                   0    -1            0        0         0
## FracFemale_GP_1                 0   -99            0        0         0
##                           dev_maxyr dev_PH Block Block_Fxn PType
## NatM_p_1_Fem_GP_1                 0      0     0         0     1
## L_at_Amin_Fem_GP_1                0      0     0         0     2
## L_at_Amax_Fem_GP_1                0      0     0         0     2
## VonBert_K_Fem_GP_1                0      0     0         0     2
## CV_young_Fem_GP_1                 0      0     0         0     2
## CV_old_Fem_GP_1                   0      0     0         0     2
## Wtlen_1_Fem_GP_1                  0      0     0         0     3
## Wtlen_2_Fem_GP_1                  0      0     0         0     3
## Mat50%_Fem_GP_1                   0      0     0         0     4
## Mat_slope_Fem_GP_1                0      0     0         0     4
## Eggs/kg_inter_Fem_GP_1            0      0     0         0     5
## Eggs/kg_slope_wt_Fem_GP_1         0      0     0         0     5
## NatM_p_1_Mal_GP_1                 0      0     0         0     1
## L_at_Amin_Mal_GP_1                0      0     0         0     2
## L_at_Amax_Mal_GP_1                0      0     0         0     2
## VonBert_K_Mal_GP_1                0      0     0         0     2
## CV_young_Mal_GP_1                 0      0     0         0     2
## CV_old_Mal_GP_1                   0      0     0         0     2
## Wtlen_1_Mal_GP_1                  0      0     0         0     3
## Wtlen_2_Mal_GP_1                  0      0     0         0     3
## RecrDist_GP_1                     0      0     0         0     7
## RecrDist_Area_1                   0      0     0         0     8
## RecrDist_month_1                  0      0     0         0     9
## CohortGrowDev                     0      0     0         0    11
## FracFemale_GP_1                   0      0     0         0    14</code></pre>
<p>   </p>
<p>Puede realizar cambios estructurales básicos o grandes en su modelo
en R. Por ejemplo, el valor inicial de M se puede cambiar:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># view the initial value</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>ctl<span class="sc">$</span>MG_parms[<span class="st">&quot;NatM_p_1_Fem_GP_1&quot;</span>, <span class="st">&quot;INIT&quot;</span>]</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.1</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co">#change it to 0.2</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>ctl<span class="sc">$</span>MG_parms[<span class="st">&quot;NatM_p_1_Fem_GP_1&quot;</span>, <span class="st">&quot;INIT&quot;</span>] <span class="ot">&lt;-</span> <span class="fl">0.2</span></span></code></pre></div>
<p>Al realizar grandes cambios estructurales, es posible que sea
necesario agregar elementos adicionales que antes eran NULL.</p>
<p>Algunas entradas requeridas están especificadas en otras entradas,
por lo que es importante tener en cuenta que cambiar una opción puede
hacer que SS3 espere una cantidad diferente de valores en los archivos
de entrada que antes. La mayoría de las veces, estas especificaciones se
leen justo después de la opción.</p>
<p>El <a
href="https://nmfs-stock-synthesis.github.io/doc/SS330_User_Manual.html">manual
de usuario SS3</a> se puede utilizar como guía editar su modelo. Las
especificaciones se indican en el manual.</p>
<p>Para averiguar los nombres en el objeto de la lista r4ss, puede ser
necesario realizar cambios directamente en los archivos de entrada y
luego leerlos nuevamente en R, o buscar en el código fuente los nombres
de los elementos de la lista. Por ejemplo, el código fuente de
<code>SS_readctl()</code> cuando se usa un archivo SS3.30 se encuentra
en <a href="https://github.com/r4ss/r4ss/blob/main/R/SS_readctl_3.30.R"
class="uri">https://github.com/r4ss/r4ss/blob/main/R/SS_readctl_3.30.R</a>.</p>
<p>También se pueden modificar las especificaciones en otros archivos.
Por ejemplo, la biomasa objetivo se puede modificar en el archivo
<strong>forecast.ss</strong>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>fore<span class="sc">$</span>Btarget</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.342</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>fore<span class="sc">$</span>Btarget <span class="ot">&lt;-</span> <span class="fl">0.45</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>fore<span class="sc">$</span>Btarget</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.45</span></span></code></pre></div>
<p>Las funciones <code>SS_write*()</code> se pueden usar para escribir
los objetos R de entrada de SS3 modificados en archivos de entrada:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>r4ss<span class="sc">::</span><span class="fu">SS_writestarter</span>(start, <span class="at">dir =</span> new_mod_path, <span class="at">overwrite =</span> <span class="cn">TRUE</span>, </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## overwriting file: C:/MATH4FISH/Math4fish_SS3/model_files/simple_new/starter.ss</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; overwriting file: simple_new/starter.ss</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>r4ss<span class="sc">::</span><span class="fu">SS_writedat</span>(dat, <span class="at">outfile =</span> <span class="fu">file.path</span>(new_mod_path, start<span class="sc">$</span>datfile), </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">overwrite =</span> <span class="cn">TRUE</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>r4ss<span class="sc">::</span><span class="fu">SS_writectl</span>(ctl, <span class="at">outfile =</span> <span class="fu">file.path</span>(new_mod_path, start<span class="sc">$</span>ctlfile),</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">overwrite =</span> <span class="cn">TRUE</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>r4ss<span class="sc">::</span><span class="fu">SS_writeforecast</span>(fore, <span class="at">dir =</span> new_mod_path, <span class="at">file =</span> <span class="st">&quot;forecast.ss&quot;</span>, </span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">overwrite =</span> <span class="cn">TRUE</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>Si realiza cambios en los archivos del modelo de entrada que hacen
que SS3 no pueda analizar el archivo, las funciones
<code>SS_write*()</code> pueden generar un error (y, con suerte, brindar
un mensaje informativo sobre el motivo). Sin embargo, es posible que se
escriba un archivo de modelo de SS3 no válido, por lo que la verdadera
prueba es si es posible o no ejecutar SS3 con los archivos de modelo
modificados.</p>
<p>Si necesita ayuda para solucionar problemas de las funciones
<code>SS_read*()</code> o <code>SS_write*()</code> o desea informar un
error, publique un problema en el repositorio r4ss.</p>
<p>El modelo ahora se puede ejecutar con la función
<code>run_SS_models</code> como se muestra a continuación:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>r4ss<span class="sc">::</span><span class="fu">run_SS_models</span>(<span class="at">dirvec =</span> new_mod_path, <span class="at">model =</span> exe_path ,<span class="at">skipfinished =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>Si no está seguro de haber realizado la configuración correcta
(p. ej., agregando el número correcto de líneas de parámetros para una
configuración de capturabilidad elegida), intente ejecutar el modelo con
<code>maxphase = 0</code> en el archivo de <strong>start.ss</strong> y
la opción ADMB <code>-nohess</code> (o para SS3 3.30. 16 y posteriores,
ejecute el modelo con opciones de línea de comando
<code>-stopph 0 -nohess</code>, no es necesario cambiar el archivo
<strong>start.ss</strong>). Si se completa la ejecución del modelo,
puede comparar el archivo <strong>control.ss_new</strong> y el primer
conjunto de datos en <strong>data.ss_new</strong> con sus archivos de
entrada de SS3 para asegurarse de que SS3 interpretó los valores según
lo previsto. Si la ejecución finaliza antes de completarse, puede buscar
en <strong>warning.sso</strong> y <strong>echoinput.sso</strong> para
obtener pistas sobre el problema de su configuración.</p>
<div id="fases-de-estimación-de-parámetros" class="section level2">
<h2>Fases de estimación de parámetros</h2>
<p>Las fases se utilizan dentro de ADMB para decirle al programa en qué
orden se deben estimar los parámetros. Para obtener más detalles sobre
las fases en ADMB, consulte el <a
href="http://www.admb-project.org/docs/manuals/">manual de usuario de
ADMB</a>.</p>
<ul>
<li><p>Una <strong>fase negativa</strong> indica que el parámetro no se
estima, sino que se especifica.</p></li>
<li><p>Una <strong>fase positiva</strong> indica que el parámetro será
estimado. Los parámetros con una fase positiva más baja se estimarán
antes que aquellos con una fase positiva más alta.</p></li>
</ul>
<div id="en-qué-fase-debería-poner-un-parámetro-estimado"
class="section level3">
<h3>¿En qué fase debería poner un parámetro estimado?</h3>
<p>Si bien existe variabilidad entre los analistas y los modelos en la
forma en que se utiliza la fase, en general, los parámetros con fases
positivas bajas deben ser para valores que definen la escala de la
población (es decir, R0, mortalidad natural, steepness,
selectividad).</p>
<p>Los parámetros para afinar los ajustes a los datos a menudo se
estiman en fases posteriores (es decir, parámetros de capturabilidad,
crecimiento y desviación del reclutamiento). Muchos modelos usan fases
positivas de aproximadamente 1 a 5, aunque es posible usar valores de
fase más altos.</p>
<p>Cuando se ejecuta un modelo sin estimar nada, las fases se ignoran;
debido a que no hay estimación, ejecutar sin estimación es como incluir
una fase negativa para todos los parámetros.</p>
</div>
</div>
<div id="flujo-de-trabajo-para-llegar-a-un-modelo-final"
class="section level2">
<h2>Flujo de trabajo para llegar a un modelo final</h2>
<p>¡Es importante recordar que llegar a un modelo final lleva tiempo y
muchas iteraciones! Es importante realizar pequeñas revisiones, volver a
ejecutar el modelo y ver cómo ha cambiado el modelo con cada pequeña
revisión. Por lo general, se requieren muchas ejecuciones intermedias
del modelo antes de llegar a un modelo final.</p>
<p>La creación de secuencias de comandos con funciones r4ss es una forma
de desarrollar un flujo de trabajo reproducible y coherente de SS3. Sin
embargo, hay muchas formas de ejecutar y modificar los modelos de SS3.
Lo más importante es encontrar un flujo de trabajo que funcione y que
los cambios que se realizan en un modelo puedan ser documentados. Como
mínimo, mantener notas dentro de la carpeta de la ejecución o en otro
lugar con respecto a los cambios específicos de la ejecución. El control
de versiones (como git) es otra herramienta que puede ayudar a realizar
un seguimiento de los cambios en los modelos.</p>
<p>A continuación, se muestran algunas sugerencias sobre los pasos a
seguir a medida que itera hacia su modelo “final”.</p>
<div id="ejecutar-el-modelo-sin-estimación" class="section level3">
<h3>1. Ejecutar el modelo sin estimación</h3>
<p>Primero, verifique que SS3 lea los archivos de entrada según lo
previsto. Utilice las opciones de línea de comando
<code>-stopph 0 -nohess</code> para ejecutar el modelo sin estimación.
Luego, examine los archivos de <strong>warning.sso</strong>,
<strong>echoinput.sso</strong> y <strong>.ss_new files</strong>
producidos para ver cómo SS3 interpretó sus archivos de entrada y si fue
como pretendía.</p>
<p>Una vez que haya verificado que SS3 está leyendo su entrada
correctamente, también puede considerar ajustar los parámetros de
selectividad, crecimiento y reclutamiento.</p>
</div>
<div id="ejecutar-estimando-algunos-parámetros" class="section level3">
<h3>2. Ejecutar estimando algunos parámetros</h3>
<p>Intente cambiar la fase máxima para que sea mayor que 0 (quizás 2 o
3) para estimar algunos pero no todos los parámetros. Haga esto usando
<code>-stopph x -nohess</code>, donde x debe ser la fase máxima deseada
(por ejemplo, 2 o 3). <code>-nohess</code> todavía se usa para reducir
el tiempo de ejecución. Durante esta etapa de las ejecuciones del
modelo, debe intentar ajustar el modelo para resolver todos los patrones
principales en los residuales. Esto puede incluir considerar y realizar
cambios en la estructura del modelo.</p>
</div>
<div id="ejecutar-estimando-todos-los-parámetros"
class="section level3">
<h3>3. Ejecutar estimando todos los parámetros</h3>
<p>Una vez que se hayan resuelto todos los patrones principales en los
residuos, intente estimar todos los parámetros en el modelo. Cambie la
fase máxima para incluir todas las fases de su modelo (es decir, igual o
superior a la fase más alta especificada en su modelo). Querrá hacer
varias ejecuciones para diferentes propósitos de refinamiento del modelo
en este momento:</p>
<ol style="list-style-type: decimal">
<li>Realice una o más corridas con la hessiana estimada para obtener la
varianza de las desviaciones de reclutamiento y luego use este vector de
varianzas para ajustar la rampa de ajuste del sesgo (consulte el Manual
del usuario de SS3 para obtener detalles adicionales).</li>
<li>Realice ejecuciones con o sin estimar la hessiana para ajustar las
ponderaciones de datos.</li>
<li>Ejecute el modelo varias veces y altere los valores iniciales (la
opción de fluctuación se selecciona en starter.ss). Esto ejecuta el
modelo con nuevos valores de parámetros iniciales para determinar si es
posible un mejor ajuste del modelo utilizando diferentes valores
iniciales.</li>
</ol>
<p>Después de estas ejecuciones, su modelo debería estar ajustado y
listo para las ejecuciones finales.</p>
<style type="text/css">
.scroll-200{
            max-height: 200px; 
            overflow-y: auto; 
            background-color: #f1f1f1;
            }
</style>
<style type="text/css">

/*----------LOGO above TOC---------*/

#TOC::before {
  content: "";
  display: block;
  height: 100px;
  margin: 2em 20px 40px 20px;
  background-image: url("LOGO_2SN_recortado.png");
  background-size: contain;
  background-position: center center;
  background-repeat: no-repeat;
}

</style>
</div>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>

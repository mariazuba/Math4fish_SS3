<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Ejecutar modelos SS3</title>

<script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>










<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Inicio</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="intro.html">Requisitos</a>
</li>
<li>
  <a href="Datos.html">Archivos de Datos</a>
</li>
<li>
  <a href="R4SS.html">Cómo Ejecutar SS3</a>
</li>
<li>
  <a href="Visualizacion.html">Visualización</a>
</li>
<li>
  <a href="SS3diags.html">Diagnóstico Avanzado</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
<div class="upper-right-logo"> </div>

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Ejecutar modelos SS3</h1>

</div>


<p>En esta sección seguiremos los pasos propuestos por el <strong>SS3
Development Team</strong> para Desarrollar nuestro primer modelo Stock
Synthesis (SS3) <a
href="https://nmfs-stock-synthesis.github.io/doc/ss_model_tips.html"
class="uri">https://nmfs-stock-synthesis.github.io/doc/ss_model_tips.html</a>.</p>
<p>Los archivos del modelo (<strong>starter.ss, data.ss, forecast.ss,
control.ss</strong>) y el ejecutable SS3 (<strong>ss.exe</strong>) deben
estar en la misma carpeta. SS3 siempre se abre y lee los archivos en el
mismo orden, escribiendo las salidas de debugging en
<strong>echoinput.sso</strong> y advertencias en
<strong>warnings.sso</strong> a medida que se lee.</p>
<p>Luego, SS3 va a la sección de procedimiento donde ADMB realiza
cambios de parámetros iterativos para minimizar la negative log
likelihood.</p>
<p>Cuando ADMB logra la convergencia, el control pasa a sd_phase para el
cálculo de la varianza de los parámetros (a menos que se especifique la
opción <code>-nohess</code>). Después de sd_phase, SS3 pasa a la sección
de código de benchmark y forecast y luego al informe final. Los archivos
de salida que contienen resultados normalmente se escriben en el
directorio desde el que se ejecutó el modelo.</p>
<p>Cuando se completa la ejecución, aparece SS3!!. La ejecución ha
finalizado!!. Se recomienda revisar warnings.sso en busca de problemas y
sugerencias, independientemente si la ejecución se completó
correctamente o no. Si SS3 sale por error no verá el mensaje !! Run has
completed !!.</p>
<p>¿Qué hacer cuando SS3 no se ejecuta?.</p>
<ul>
<li>Asegurese de que todos los archivos y directorios tengan el nombre
correcto.</li>
<li>Verifique que el archivo <strong>starter.ss</strong> haga referencia
a los nombres correctos de los archivos de control y datos.</li>
<li>Si SS3 comienza a leer archivos y luego falla, revise los archivos
<strong>warnings.sso</strong> y <strong>echoinput.sso</strong>. El
archivo <strong>warnings.sso</strong> revelarán posibles problemas con
el modelo, mientras que <strong>echoinput.sso</strong> mostrará hasta
donde pudo ejecutarse SS3. Trabaje hacia atrás desde la parte inferior
de <strong>echoinput.sso</strong>, buscándo donde se detuvo SS3 y si las
entradas se ingresaron correctamente o no.</li>
</ul>
<p>Muchos archivos de texto de salida se crean durante la ejecución de
un modelo. Los archivos de salida más útiles se pueden dividir en :</p>
<ul>
<li><strong>Archivos que contienen resultados</strong>. Estos archivos
incluyen <strong>ss_summary.sso</strong> y <strong>report.sso</strong>
que contienen los resultados del modelo resumidos de diferentes
maneras.</li>
<li><strong>.ss_new files</strong>. Estos archivos repiten los archivos
de entrada SS3, pero incluyen comentarios estandarizados. Los valores
deben ser los mismos que los archivos de entrada, excepto
control.ss_new, que actualiza los valores iniciales a los valores
estimados finales. Los archivos .ss_new pueden ser útiles para
estandarizar los comentarios en los archivos de entrada y se pueden
verificar para asegurarse de que SS3 interpretó las entradas como
pretendía el usuario.</li>
<li><strong>Archivos utilizados para debugging</strong>. Estos archivos
incluyen <strong>warnings.sso</strong> y
<strong>echoinput.sso</strong>.</li>
</ul>
<div id="cómo-crear-nuevos-modelos-ss3" class="section level1">
<h1>Cómo crear nuevos modelos SS3</h1>
<p>Hay muchos flujos de trabajo potenciales para desarrollar un nuevo
modelo SS3, pero una técnica común es comenzar con un modelo existente y
cambiarlo por partes. La técnica básica es:</p>
<ol style="list-style-type: decimal">
<li><p>Encuentre un modelo de trabajo existente (quizás uno de los
modelos de ejemplo SS3 disponibles en el repositorio de ejemplos de
usuario o quizás un modelo más similar en forma al modelo que planea
crear).</p></li>
<li><p>Edite partes del modelo e intente ejecutar a medida que avanza
para verificar que SS3 pueda leer correctamente sus entradas y que
tengan sentido lógico (consejo: use options
<code>-stopph 0 -nohess</code> para reducir el tiempo de ejecución con
cada iteración de verificación de entradas al no estimar nada y no
invertir la arpillera).</p></li>
</ol>
</div>
<div id="sobre-la-especificación-del-modelo" class="section level1">
<h1>Sobre la especificación del modelo</h1>
<p>SS3 tiene un rico conjunto de características. Algunas entradas
requeridas están condicionadas a otras entradas, por lo que es
importante tener en cuenta que cambiar una opción puede hacer que SS3
espere una cantidad diferente de valores en los archivos de entrada que
antes. La mayoría de las veces, estas entradas condicionales se leen
justo después de la opción.</p>
<p>El manual de usuario de SS3 se puede utilizar como guía para ayudarlo
a editar su modelo. Las entradas condicionales se indican en el
manual.</p>
<p>Si no está seguro de haber realizado la configuración correcta
(p. ej., agregando el número correcto de líneas de parámetros para una
configuración de capturabilidad elegida), intente ejecutar el modelo con
<code>maxphase = 0</code> en el archivo de inicio y la opción ADMB
<code>-nohess</code> (o para SS3 3.30. 16 y posteriores, ejecute el
modelo con opciones de línea de comando <code>-stopph 0 -nohess</code>,
no es necesario cambiar el archivo de inicio). Si se completa la
ejecución del modelo, puede comparar el archivo
<strong>control.ss_new</strong> y el primer conjunto de datos en
<strong>data.ss_new</strong> con sus archivos de entrada de SS3 para
asegurarse de que SS3 interpretó los valores según lo previsto. Si la
ejecución finaliza antes de completarse, puede buscar en
<strong>warning.sso</strong> y <strong>echoinput.sso</strong> para
obtener pistas sobre el problema de su configuración.</p>
</div>
<div id="fases-de-estimación-de-parámetros" class="section level1">
<h1>Fases de estimación de parámetros</h1>
<p>Las fases se utilizan dentro de ADMB para decirle al programa en qué
orden se deben estimar los parámetros. Para obtener más detalles sobre
las fases en ADMB, consulte el <a
href="http://www.admb-project.org/docs/manuals/">manual de usuario de
ADMB</a>.</p>
<ul>
<li><p>Una <strong>fase negativa</strong> indica que el parámetro no se
estima, sino que se especifica.</p></li>
<li><p>Una <strong>fase positiva</strong> indica que el parámetro será
estimado. Los parámetros con una fase positiva más baja se estimarán
antes que aquellos con una fase positiva más alta.</p></li>
</ul>
<div id="en-qué-fase-debería-poner-un-parámetro-estimado"
class="section level4">
<h4>¿En qué fase debería poner un parámetro estimado?</h4>
<p>Si bien existe variabilidad entre los analistas y los modelos en la
forma en que se utiliza la fase, en general, los parámetros con fases
positivas bajas deben ser para valores que definen la escala de la
población (es decir, R0, mortalidad natural, steepness,
selectividad).</p>
<p>Los parámetros para afinar los ajustes a los datos a menudo se
estiman en fases posteriores (es decir, parámetros de capturabilidad,
crecimiento y desviación del reclutamiento). Muchos modelos usan fases
positivas de aproximadamente 1 a 5, aunque es posible usar valores de
fase más altos.</p>
<p>Cuando se ejecuta un modelo sin estimar nada, las fases se ignoran;
debido a que no hay estimación, ejecutar sin estimación es como incluir
una fase negativa para todos los parámetros.</p>
</div>
</div>
<div id="debugging-básicos" class="section level1">
<h1>Debugging básicos</h1>
<p>Las herramientas más útiles para depurar problemas de SS3 son los
archivos de salida de SS3 <strong>echoinput.sso</strong> y
<strong>warning.sso</strong>. A medida que se ejecuta SS3, vuelve a
escribir en <strong>echoinput.sso</strong>. Cuando SS3 sale sin
terminar, mirar el último contenido escrito en
<strong>echoinput.sso</strong> y compararlo con sus archivos de entrada
puede proporcionar pistas sobre dónde (y posiblemente por qué) falló la
ejecución.</p>
<p>Tenga en cuenta que SS3 lee las entradas en orden y las leerá
incorrectamente si se proporciona el número incorrecto de entradas. Las
advertencias generadas durante la ejecución se escriben en
<strong>warning.sso</strong>. El archivo de <strong>warning.sso</strong>
siempre debe examinarse al final de la ejecución, incluso si la
ejecución fue exitosa, ya que incluye sugerencias para mejorar la
especificación del modelo y advertencias sobre errores comunes de
especificación del modelo.</p>
</div>
<div id="flujo-de-trabajo-propuesto-para-llegar-a-un-modelo-final"
class="section level1">
<h1>Flujo de trabajo propuesto para llegar a un modelo FINAL</h1>
<p>¡Es importante recordar que llegar a un modelo lleva tiempo y muchas
iteraciones! Debe planear hacer pequeñas revisiones, volver a ejecutar
el modelo y ver cómo ha cambiado el modelo con cada pequeña revisión.
Por lo general, se requieren muchas ejecuciones intermedias del modelo
antes de llegar a un modelo final. Como mínimo, mantenga notas dentro de
la carpeta de la ejecución o en otro lugar con respecto a los cambios
específicos de la ejecución. El uso del control de versiones también
podría ser útil para realizar un seguimiento de los cambios en el
modelo. A continuación, proporcionamos algunas sugerencias sobre los
pasos a seguir a medida que itera hacia su modelo “final”.</p>
<div id="primer-paso-ejecutar-el-modelo-sin-estimación"
class="section level2">
<h2>Primer paso: ejecutar el modelo sin estimación</h2>
<p>Primero, verifique que SS3 lea los archivos de entrada según lo
previsto. Utilice las opciones de línea de comando -stopph 0 -nohess
para ejecutar el modelo sin estimación. Luego, examine los archivos de
<strong>warning.sso</strong>, <strong>echoinput.sso</strong> y
<strong>.ss_new files</strong> producidos para ver cómo SS3 interpretó
sus archivos de entrada y si fue como pretendía.</p>
<p>Una vez que haya verificado que SS3 está leyendo su entrada
correctamente, también puede considerar ajustar los parámetros de
selectividad, crecimiento y reclutamiento.</p>
</div>
<div id="segundo-paso-ejecutar-estimando-algunos-parámetros"
class="section level2">
<h2>Segundo paso: ejecutar estimando algunos parámetros</h2>
<p>Intente cambiar la fase máxima para que sea mayor que 0 (quizás 2 o
3) para estimar algunos pero no todos los parámetros. Haga esto usando
<code>-stopph x -nohess</code>, donde x debe ser la fase máxima deseada
(por ejemplo, 2 o 3). -nohess todavía se usa para reducir el tiempo de
ejecución. Durante esta etapa de las ejecuciones del modelo, debe
intentar ajustar el modelo para resolver todos los patrones principales
en los residuales. Esto puede incluir considerar y realizar cambios en
la estructura del modelo.</p>
</div>
<div id="tercer-paso-ejecutar-estimando-todos-los-parámetros"
class="section level2">
<h2>Tercer paso: ejecutar estimando todos los parámetros</h2>
<p>Una vez que se hayan resuelto todos los patrones principales en los
residuos, intente estimar todos los parámetros en el modelo. Cambie la
fase máxima para incluir todas las fases de su modelo (es decir, igual o
superior a la fase más alta especificada en su modelo). Querrá hacer
varias ejecuciones para diferentes propósitos de refinamiento del modelo
en este momento:</p>
<ol style="list-style-type: decimal">
<li>Realice una o más corridas con la hessiana estimada para obtener la
varianza de las desviaciones de reclutamiento y luego use este vector de
varianzas para ajustar la rampa de ajuste del sesgo (consulte el Manual
del usuario de SS3 para obtener detalles adicionales).</li>
<li>Realice ejecuciones con o sin estimar la hessiana para ajustar las
ponderaciones de datos.</li>
<li>Ejecute el modelo varias veces y altere los valores iniciales (la
opción de fluctuación se selecciona en starter.ss). Esto ejecuta el
modelo con nuevos valores de parámetros iniciales para determinar si es
posible un mejor ajuste del modelo utilizando diferentes valores
iniciales.</li>
</ol>
<p>Después de estas ejecuciones, su modelo debería estar ajustado y
listo para las ejecuciones finales.</p>
<style type="text/css">
.scroll-200{
            max-height: 200px; 
            overflow-y: auto; 
            background-color: #f1f1f1;
            }
</style>
<style type="text/css">

/*----------LOGO above TOC---------*/

#TOC::before {
  content: "";
  display: block;
  height: 100px;
  margin: 2em 20px 40px 20px;
  background-image: url("LOGO_2SN_recortado.png");
  background-size: contain;
  background-position: center center;
  background-repeat: no-repeat;
}

</style>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
